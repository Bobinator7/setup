01. Installation Guide Ubuntu 12.04 "precise" (Client)
Install Ubuntu 12.04 LTS "precise"

username: ipa

systemname: cob-stud-<client number>

password: root
Update and upgrade your new operating system

$ sudo apt-get update
$ sudo apt-get upgrade
$ sudo apt-get dist-upgrade
$ sudo apt-get clean

$ sudo reboot

Create "shared" directory on local client

$ sudo mkdir /share
$ sudo chmod -R a+rw /share

Create admin group

$ sudo addgroup admin

Create extra administrator account’s

$ sudo adduser stud-admin --home /home-local/stud-admin
$ sudo adduser stud-admin admin

$ sudo adduser jenkins --home /home-local/jenkins
$ sudo adduser jenkins admin

Went to System Settings/User Accounts and add the new admin users as Admin’s and give them their name. After that logout from ipa account and login as stud-admin and delete the ipa account.
Gain root rights for admin user’s

$ sudo visudo -f /etc/sudoers
##add to the list###
stud-admin ALL=(ALL) NOPASSWD: ALL
jenkins    ALL=(ALL) NOPASSWD: ALL

Disable guest account

$ sudo nano /etc/lightdm/lightdm.conf
##add##
allow-guest=false
$ sudo restart lightdm

Remove the world readable permissions

$ sudo chmod 750 /home-local/stud-admin
$ sudo chmod 750 /home-local/jenkins

Enable passwordless login for SSH

Login as stud-admin

$ ssh-keygen
$ ssh-copy-id stud-admin-desktop

Login to jenkins server

$ su jenkins
$ ssh cob-jenkins-server
$ ssh-copy-id cob-stud-X

Login to stud-admin@stud-admin-desktop and test if the following script works without throwing an error

$ ./git/setup/cob-stud-clients/cob-stud-install.sh vim

Install nvidia driver

$ sudo add-apt-repository ppa:ubuntu-x-swat/x-updates
$ sudo apt-get update
$ sudo apt-get install nvidia-current-dev

Install basic tools

$ sudo apt-add-repository "deb http://archive.canonical.com/ $(lsb_release -sc) partner"
$ sudo apt-get update && sudo apt-get install flashplugin-installer acroread

$ sudo apt-get install vim tree openssh-server ntp
$ sudo apt-get install eclipse libtbb-dev libtbb2 libsuitesparse-dev libxerces-c2-dev
$ sudo apt-get install libann-dev flashplugin-nonfree emacs chromium-browser gimp ipython
$ sudo apt-get install geany meshlab postgresql pgadmin3 inkscape wmctrl dia octave libvtk5-qt4-dev
$ sudo apt-get install pbuilder debootstrap devscripts pigz parallel
$ sudo apt-get install gitg meld curl openjdk-6-jdk zsh terminator htop

Add proxy for apt

$ sudo nano /etc/apt/apt.conf.d/proxy
##add##
Acquire::http { Proxy "http://cob-jenkins-server:3142"; };

Setup nfs

$ sudo apt-get install portmap nfs-common

$ sudo nano /etc/fstab
##add to the list##
cob-kitchen-nas:/volume1/home-nas    /home nfs rw,hard,intr   0   0

Install LDAP clients

$ sudo apt-get install libnss-ldap libpam-ldap nscd portmap

Edit the follow files

$ sudo gedit /etc/nsswitch.conf
##edit to##
# /etc/nsswitch.conf
passwd:    files ldap
group:     files ldap
shadow:    files ldap
hosts:     files mdns4_minimal [NOTFOUND=return] dns mdns4
networks:  files
protocols: db files
services:  db files
ethers:    db files
rpc:       db files
netgroup:  nis
sudoers:   ldap files

$ sudo gedit /etc/pam.d/common-auth
##edit to##
# /etc/pam.d/common-auth
auth [success=2 default=ignore] pam_unix.so nullok_secure
auth [success=1 default=ignore] pam_ldap.so use_first_pass
auth requisite                  pam_deny.so
auth required                   pam_permit.so
auth optional                   pam_cap.so

$ sudo gedit /etc/pam.d/common-account
##edit to##
# /etc/pam.d/common-account
account [success=2 new_authtok_reqd=done default=ignore] pam_unix.so
account [success=1 default=ignore]                       pam_ldap.so
account requisite                                        pam_deny.so
account required                                         pam_permit.so

$ sudo gedit /etc/pam.d/common-password
##edit to##
# /etc/pam.d/common-password
password requisite                                   pam_cracklib.so retry=3 minlen=8 difok=3
password [success=2 default=ignore]                  pam_unix.so obscure use_authtok try_first_pass sha512
password [success=1 user_unknown=ignore default=die] pam_ldap.so use_authtok try_first_pass
password requisite                                   pam_deny.so
password required                                    pam_permit.so
password optional                                    pam_gnome_keyring.so

$ sudo gedit /etc/pam.d/common-session
##edit to##
# /etc/pam.d/common-session
session  [default=1]  pam_permit.so
session  requisite    pam_deny.so
session  required     pam_permit.so
session  optional     pam_umask.so
session  required     pam_unix.so
session  optional     pam_ldap.so
session  optional     pam_ck_connector.so nox11
session  optional     pam_mkhomedir.so skel=/etc/skel umask=0022

$ sudo gedit /etc/ldap.conf
##edit to##
###DEBCONF###
base dc=cob-kitchen-server
host 10.0.1.1
ldap_version 3
rootbinddn cn=directory manager
pam_password md5
sudoers_base ou=SUDOers,dc=cob-kitchen-server
pam_lookup_policy yes
pam_check_host_attr yes
nss_initgroups_ignoreusers avahi,avahi-autoipd,backup,bin,colord,daemon,games,gnats,
  hplip,irc,kernoops,libuuid,lightdm,list,lp,mail,man,messagebus,news,proxy,pulse,
  root,rtkit,saned,speech-dispatcher,sshd,sync,sys,syslog,usbmux,uucp,whoopsie,www-data

$ sudo gedit /etc/ldap/ldap.conf
##edit to##
# LDAP Defaults
BASE                   dc=cob-kitchen-server
host                   10.0.1.1
ssl                    on
use_sasl               no
tls_checkpeer          no
sudoers_base           ou=SUDOers,dc=cob-kitchen-server
sudoers_debug          2
pam_lookup_policy      yes
pam_check_host_attr    yes
pam_lookup_policy      yes
pam_check_host_attr    yes
TLS_CACERT             /etc/ssl/certs/ca-certificates.crt
TLS_REQCERT            never

$ sudo gedit /etc/lightdm/lightdm.conf
##add to the list##
greeter-show-manual-login=true

Install ROS "fuerte" "groovy"

$ sudo sh -c 'echo "deb http://packages.ros.org/ros/ubuntu precise main" > /etc/apt/sources.list.d/ros-latest.list'
$ wget http://packages.ros.org/ros.key -O - | sudo apt-key add -
$ sudo apt-get update

$ sudo apt-get install ros-fuerte-desktop-full
$ sudo apt-get install ros-groovy-desktop-full

$ sudo rosdep init
$ rosdep update

Environment setup

###for fuerte###
$ echo "source /opt/ros/fuerte/setup.bash" >> ~/.bashrc
$ source ~/.bashrc

###for groovy###
$ echo "source /opt/ros/groovy/setup.bash" >> ~/.bashrc
$ source ~/.bashrc

if you just want to change the environment of your current shell, you can type:

###for fuerte###
$ source /opt/ros/fuerte/setup.bash

###for groovy###
$ source /opt/ros/groovy/setup.bash

Install additional tools

$ sudo apt-get install python-rosinstall python-rosdep
$ sudo apt-get install python-setuptools ogre-tools ros-groovy-diagnostics-monitors
$ sudo apt-get install ros-groovy-rxtools ros-groovy-pr2-* ros-groovy-client-rosjava-jni
$ sudo apt-get install ros-groovy-openni*

$ sudo easy_install -U rosinstall

Setup ntp time synchronisation

$ sudo nano /etc/ntp.conf
##change server to##
server cob-kitchen-server

